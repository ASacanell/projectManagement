

namespace :node do

  
  desc 'Execute > npm install'
  task :npm_install, :where do |t, args|
    cmd = "npm install"
    docker_exec DOCKERS[:node] args[:where] cmd
  end

  desc 'Execute > npm postinstall'
  task :npm_postinstall do 
  cmd = "npm run postinstall"
  docker_exec DOCKERS[:node] "Client" cmd
end

desc 'Execute > bower install'
task :npm_bower do
  cmd = "npm run bowerINstall"
  docker_exec DOCKERS[:node] "Client" cmd
end
end

def docker_exec(instance, dir, command)
  cmd = "docker exec #{ENVIRONMENT[:docker_flags]} #{instance} bash -c \"cd #{dir} && #{command}\""
  `cmd`
end
